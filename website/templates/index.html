{% extends "base.html" %}

{% block content %}
<!-- Featured events carosel -->

<div class="container overflow-hidden">

  <div id="carouselExampleCaptions" class="carousel slide">
    <div class="carousel-indicators">
      <button type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide-to="0" class="active"
        aria-current="true" aria-label="Slide 1"></button>
      <button type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide-to="1"
        aria-label="Slide 2"></button>
      <button type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide-to="2"
        aria-label="Slide 3"></button>
    </div>

    <div class="carousel-inner">

      <!-- Featured event 1 -->
      <div class="carousel-item active">
        <img src="https://placehold.co/1200x500?text=Featured+Event+1" class="d-block w-100 object-fit-cover"
          alt="Featured event 1 placeholder">
        <div class="carousel-caption">
          <h5>Glass Animals Extend 'Tour Of Earth' with New Australian Dates</h5>
          <p>Glass Animals have announced an extension of their 'Tour Of Earth', adding new Australian
            shows this summer.
          </p>
        </div>
      </div>

      <!-- Featured event 2 -->
      <div class="carousel-item">
        <img src="https://placehold.co/1200x500?text=Featured+Event+2" class="d-block w-100 object-fit-cover"
          alt="Featured event 2 placeholder">
        <div class="carousel-caption">
          <h5>Mac DeMarco Announces New Album 'Guitar' and 2025 Tour Dates</h5>
          <p>Mac DeMarco has unveiled his new album, Guitar, set for release on August 22, 2025.</p>
        </div>
      </div>

      <!-- Featured event 3 -->
      <div class="carousel-item">
        <img src="https://placehold.co/1200x500?text=Featured+Event+3" class="d-block w-100 object-fit-cover"
          alt="Featured event 3 placeholder">
        <div class="carousel-caption">
          <h5>Pixies Announce Extra Dates</h5>
          <p>Massachusetts Indie Rockers announce extra tour dates ahead of their upcoming album release.</p>
        </div>
      </div>

    </div>

    <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide="prev">
      <span class="carousel-control-prev-icon" aria-hidden="true"></span>
      <span class="visually-hidden">Previous</span>
    </button>

    <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide="next">
      <span class="carousel-control-next-icon" aria-hidden="true"></span>
      <span class="visually-hidden">Next</span>
    </button>
  </div>


      <!-- Filters -->
<div class="container px-3 mt-3">
  <ul class="nav nav-pills gap-2" id="event-filters" role="tablist">
    <li class="nav-item" role="presentation">
      <a
        class="nav-link {% if active_filter=='all' %}active{% endif %}"
        href="{{ url_for('main.index', filter='all') }}"
        role="tab"
      >All</a>
    </li>
    <li class="nav-item" role="presentation">
      <a
        class="nav-link {% if active_filter=='today' %}active{% endif %}"
        href="{{ url_for('main.index', filter='today') }}"
        role="tab"
      >Today</a>
    </li>
    <li class="nav-item" role="presentation">
      <a
        class="nav-link {% if active_filter=='weekend' %}active{% endif %}"
        href="{{ url_for('main.index', filter='weekend') }}"
        role="tab"
      >This Weekend</a>
    </li>
  </ul>
</div>

  <div class="row">
    <!-- Event 1 (dynamic from DB) -->
    <div class="col-12 col-md-6 col-lg-3 p-3">
      {% if event %}
      <div class="card border-0 shadow-sm rounded-3 overflow-hidden">

        <!-- Event image -->
        <a href="{{ url_for('event.show', id=event.id) }}" class="stretched-link">
          <div class="ratio ratio-16x9">
            <img src="{{ event.image and url_for('static', filename=event.image) or 'https://placehold.co/600x400?text=Event+Image' }}"
     class="card-img-top object-fit-cover"
   alt="{{ event.title }}"
>

          </div>
        </a>

        <!-- Card body -->
        <div class="card-body">
          <h5 class="card-title fw-bold mb-1">{{ event.title }}</h5>
          <p class="text-muted mb-1">{{ event.venue or 'Venue TBA' }}</p>
          <p class="mb-2">{{ event.date or 'Date to be announced' }}</p>
          <div class="d-flex justify-content-between align-items-center">
            <p class="fw-semibold text-primary mb-0">
              {{ "$%.2f"|format(event.price) if event.price else "Free" }}
            </p>
            <span class="badge rounded-pill bg-success">
              <i class="fa-solid fa-ticket"></i> On Sale
            </span>
          </div>
        </div>
      </div>
      {% else %}
      <p class="text-muted">No events yet — <a href="{{ url_for('event.create') }}">create one</a>!</p>
      {% endif %}
    </div>

   {% if events and events|length %}
  {% for ev in events %}
    <div class="col-12 col-md-6 col-lg-3 p-3">
      <div class="card border-0 shadow-sm rounded-3 overflow-hidden">
        <a href="{{ url_for('event.show', id=ev.id) }}" class="stretched-link">
          <div class="ratio ratio-16x9">
            {% set img = ev.image %}
            <img
              src="{{ img if img and img.startswith('/static/') else url_for('static', filename=img or 'image/default.jpg') }}"
              class="card-img-top object-fit-cover"
              alt="{{ ev.title }}">
          </div>
        </a>
        <div class="card-body">
          <h5 class="card-title fw-bold mb-1">{{ ev.title }}</h5>
          <p class="text-muted mb-1">{{ ev.venue or 'Venue TBA' }}</p>
          <p class="mb-2">
            {% if ev.date %}{{ ev.date }}{% else %}Date to be announced{% endif %}
          </p>
          <div class="d-flex justify-content-between align-items-center">
            <p class="fw-semibold text-primary mb-0">
              {{ ev.price is not none and ('$%.2f'|format(ev.price)) or 'Free' }}
            </p>
            <span class="badge rounded-pill bg-success">
              <i class="fa-solid fa-ticket"></i> On Sale
            </span>
          </div>
        </div>
      </div>
    </div>
  {% endfor %}
{% else %}
  <div class="col-12">
    <p class="text-muted">No events yet — <a href="{{ url_for('event.create') }}">create one</a>!</p>
  </div>
{% endif %}


<!-- Load more events button -->

<div class="text-center">
  <button class="btn btn-primary mb-3" type="button">Load more events</button>
</div>

</body>

<!-- Bootstrap script -->

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
{% endblock %}