{% extends "base.html" %}

{% block content %}
<!-- Featured events carosel -->

<div class="container overflow-hidden">

  <div id="carouselExampleCaptions" class="carousel slide mb-2">
    <div class="carousel-indicators">
      <button type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide-to="0" class="active"
        aria-current="true" aria-label="Slide 1"></button>
      <button type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide-to="1"
        aria-label="Slide 2"></button>
      <button type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide-to="2"
        aria-label="Slide 3"></button>
    </div>

    <div class="carousel-inner">

      <!-- Featured event 1 -->
      <div class="carousel-item active">
        <img src="https://placehold.co/1200x500?text=Featured+Event+1" class="d-block w-100 object-fit-cover"
          alt="Featured event 1 placeholder">
        <div class="carousel-caption">
          <h5>Glass Animals Extend 'Tour Of Earth' with New Australian Dates</h5>
          <p>Glass Animals have announced an extension of their 'Tour Of Earth', adding new Australian
            shows this summer.
          </p>
        </div>
      </div>

      <!-- Featured event 2 -->
      <div class="carousel-item">
        <img src="https://placehold.co/1200x500?text=Featured+Event+2" class="d-block w-100 object-fit-cover"
          alt="Featured event 2 placeholder">
        <div class="carousel-caption">
          <h5>Mac DeMarco Announces New Album 'Guitar' and 2025 Tour Dates</h5>
          <p>Mac DeMarco has unveiled his new album, Guitar, set for release on August 22, 2025.</p>
        </div>
      </div>

      <!-- Featured event 3 -->
      <div class="carousel-item">
        <img src="https://placehold.co/1200x500?text=Featured+Event+3" class="d-block w-100 object-fit-cover"
          alt="Featured event 3 placeholder">
        <div class="carousel-caption">
          <h5>Pixies Announce Extra Dates</h5>
          <p>Massachusetts Indie Rockers announce extra tour dates ahead of their upcoming album release.</p>
        </div>
      </div>

    </div>

    <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide="prev">
      <span class="carousel-control-prev-icon" aria-hidden="true"></span>
      <span class="visually-hidden">Previous</span>
    </button>

    <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide="next">
      <span class="carousel-control-next-icon" aria-hidden="true"></span>
      <span class="visually-hidden">Next</span>
    </button>
  </div>

  <!-- Event content -->

  <!-- Category filters -->
  <ul class="nav nav-underline mb-3" id="filterTabs">
    <li class="nav-item">
      <a class="nav-link active" href="#" data-filter="all">All</a>
    </li>
    <li class="nav-item">
      <a class="nav-link" href="#" data-filter="today">Today</a>
    </li>
    <li class="nav-item">
      <a class="nav-link" href="#" data-filter="weekend">This Weekend</a>
    </li>
  </ul>

  <div class="mb-3">
    <div id="event-grid">
      {% include "_event_cards.html" %}
    </div>
  </div>


  <!-- Load more events button -->

  <div class="text-center">
    <button class="btn btn-primary mb-3" type="button">Load more events</button>
  </div>

</div>

<!-- Bootstrap script -->

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

<!-- No reload -->

<script>
  document.querySelectorAll('.nav-link[data-filter]').forEach(link => {
    link.addEventListener('click', async (e) => {
      e.preventDefault();
      const filter = e.target.dataset.filter;

      // Update active tab styling
      document.querySelectorAll('.nav-link').forEach(l => l.classList.remove('active'));
      e.target.classList.add('active');

      // Fetch updated event grid
      const res = await fetch(`/events/filter?filter=${filter}`);
      const html = await res.text();

      // Replace only the grid section
      document.getElementById('event-grid').innerHTML = html;
    });
  });
</script>

{% endblock %}